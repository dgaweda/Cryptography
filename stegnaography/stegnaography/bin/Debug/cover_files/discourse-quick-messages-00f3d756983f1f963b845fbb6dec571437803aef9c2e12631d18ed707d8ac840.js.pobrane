define("discourse/plugins/discourse-quick-messages/discourse/initializers/quick-messages-initializer",["exports","ember-addons/ember-computed-decorators","discourse/lib/plugin-api","discourse/lib/url","discourse-common/lib/get-owner"],function(e,t,s,i,n){"use strict";function o(e,t,s,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,i){return i(e,t,s)||s},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"quick-messages-initializer",initialize:function(e){var i=e.lookup("site-settings:main"),n=e.lookup("current-user:main"),r=e.lookup("site:main");(0,s.withPluginApi)("0.8.12",function(e){if(n&&n.show_quick_messages&&!i.quick_message_integrated&&(e.reopenWidget("header-notifications",{html:function(e){return this._super(e).filter(function(e){return!(e.properties||e.attrs).className.match(/(messages|ring)/)})}}),e.decorateWidget("header-icons:before",function(e){var t=e.widget.parentWidget.state,s=[];if(n&&(!r.mobileView||i.quick_message_mobile)){var o=n.get("unread_private_messages");s.push(e.attach("header-dropdown",{title:"user.private_messages",icon:i.quick_message_icon,iconId:"toggle-messages-menu",active:t.messagesVisible,action:"toggleMessages",contents:function(){if(o)return this.attach("link",{action:"toggleMessages",className:"badge-notification unread-private-messages",rawLabel:""+o})}}))}return s}),e.addHeaderPanel("messages-menu","messagesVisible",function(e,t){return{}}),e.attachWidgetAction("header","toggleMessages",function(){this.state.messagesVisible=!this.state.messagesVisible}),e.attachWidgetAction("header","messagesClicked",function(){this.linkClickedEvent(),this.state.messagesVisible=!1}),Discourse.SiteSettings.whos_online_enabled&&e.modifyClass("component:docked-post",{onlineService:Ember.inject.service("online-service")})),Discourse.SiteSettings.quick_message_enabled){var s,a,c;e.modifyClass("controller:preferences/interface",(s=(0,t.default)("makeThemeDefault"),a=(0,t.observes)("saved"),c={saveAttrNames:function(){var e=this._super.apply(this,arguments);return e.includes("custom_fields")||e.push("custom_fields"),e},_updateShowQuickMessages:function(){this.get("saved")&&n&&this.get("model.id")===n.get("id")&&n.set("quick_messages_pref",this.get("model.custom_fields.quick_messages_pref"))}},o(c,"saveAttrNames",[s],Object.getOwnPropertyDescriptor(c,"saveAttrNames"),c),o(c,"_updateShowQuickMessages",[a],Object.getOwnPropertyDescriptor(c,"_updateShowQuickMessages"),c),c))}})}}}),define("discourse/plugins/discourse-quick-messages/discourse/pre-initializers/quick-messages-pre-initializer",["exports","ember-addons/ember-computed-decorators","discourse/lib/plugin-api"],function(e,t,s){"use strict";function i(e,t,s,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,i){return i(e,t,s)||s},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"quick-messages-pre-initializer",initialize:function(e){var n=e.lookup("current-user:main");n&&n.show_quick_messages&&(0,s.withPluginApi)("0.8.12",function(e){var s,n,o,r;e.modifyClass("controller:application",(s=(0,t.on)("didInsertElement"),n=(0,t.on)("willDestroyElement"),o=(0,t.default)(),r={docked:Ember.A(),_setupQuickMessages:function(){$(window).on("resize",Ember.run.bind(this,this.maxIndex))},_teardownQuickMessages:function(){$(window).off("resize",Ember.run.bind(this,this.maxIndex))},maxIndex:function(){return this.site.mobileView?1:Math.floor(($(window).width()-390)/340)},actions:{addToDocked:function(e){e=e||"new";var t=this.get("docked");if(!t.includes(e)){var s=this.get("maxIndex");t.length>=s?t.replace(0,1,e):t.pushObject(e)}},removeDocked:function(e){this.get("docked").removeAt(e)},updateId:function(e,t){this.get("docked").replace(e,1,[t])}}},i(r,"_setupQuickMessages",[s],Object.getOwnPropertyDescriptor(r,"_setupQuickMessages"),r),i(r,"_teardownQuickMessages",[n],Object.getOwnPropertyDescriptor(r,"_teardownQuickMessages"),r),i(r,"maxIndex",[o],Object.getOwnPropertyDescriptor(r,"maxIndex"),r),r))})}}}),define("discourse/plugins/discourse-quick-messages/discourse/connectors/above-footer/messages-container",["exports","discourse-common/lib/get-owner"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,s){var i=(0,t.getOwner)(this).lookup("controller:application"),n=i.get("docked"),o=i.get("maxIndex"),r=s.get("mobileView");s.setProperties({docked:n,maxIndex:o,singleWindow:r})},actions:{removeDocked:function(e){(0,t.getOwner)(this).lookup("controller:application").send("removeDocked",e)},updateId:function(e,s){(0,t.getOwner)(this).lookup("controller:application").send("updateId",e,s)}}}}),Ember.TEMPLATES["javascripts/discourse/connectors/above-footer/messages-container"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["id","index"],"statements":[[4,"each",[[25,["docked"]]],null,{"statements":[[0,"  "],[1,[29,"docked-composer",null,[["id","docked","maxIndex","index","removeDocked","updateId","singleWindow"],[[24,1,[]],[25,["docked"]],[25,["maxIndex"]],[24,2,[]],"removeDocked","updateId",[25,["singleWindow"]]]]],false],[0,"\\n"]],"parameters":[1,2]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/above-footer/messages-container"}}),define("discourse/plugins/discourse-quick-messages/discourse/connectors/user-preferences-interface/show-quick-messages",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,t){return Discourse.SiteSettings.quick_message_enabled&&Discourse.SiteSettings.quick_message_user_preference&&e.model.quick_messages_access}}}),Ember.TEMPLATES["javascripts/connectors/user-preferences-interface/show-quick-messages"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","controls"],[9],[0,"\\n  "],[7,"label"],[11,"class","checkbox-label"],[9],[0,"\\n    "],[1,[29,"input",null,[["type","checked"],["checkbox",[25,["model","custom_fields","show_quick_messages"]]]]],false],[0,"\\n    "],[1,[29,"i18n",["user_preferences.quick_messages_preference"],null],false],[0,"\\n  "],[10],[0,"\\n"],[10]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/user-preferences-interface/show-quick-messages"}}),Ember.TEMPLATES["javascripts/components/docked-composer"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["post"],"statements":[[7,"div"],[11,"class","docked-composer-header"],[9],[0,"\\n"],[4,"if",[[25,["firstPost"]]],null,{"statements":[[0,"    "],[1,[29,"user-selector",null,[["topicId","excludeCurrentUser","id","includeMentionableGroups","placeholderKey","tabindex","usernames"],[[25,["topic","id"]],"true","private-message-users","true","composer.users_placeholder","1",[25,["targetUsernames"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"class","docked-usernames-wrapper"],[9],[0,"\\n"],[4,"if",[[25,["hiddenUsernames"]]],null,{"statements":[[0,"        "],[7,"a"],[11,"class","docked-usernames"],[9],[0,"\\n          "],[1,[23,"otherUsernames"],false],[0,"\\n        "],[3,"action",[[24,0,[]],"showUsernames"]],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"span"],[11,"class","docked-usernames"],[9],[1,[23,"otherUsernames"],false],[10],[0,"\\n"]],"parameters":[]}],[0,"    "],[10],[0,"\\n"],[4,"if",[[25,["showUsernames"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","extra-usernames"],[9],[0,"\\n        "],[1,[23,"otherUsernames"],false],[0,"\\n        "],[7,"a"],[11,"href",""],[11,"class","cancel"],[9],[0,"\\n          "],[1,[29,"d-icon",["times"],null],false],[0,"\\n        "],[3,"action",[[24,0,[]],"showUsernames"]],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"  "],[7,"div"],[11,"class","controls"],[9],[0,"\\n"],[4,"if",[[25,["integratedCompose"]]],null,{"statements":[[0,"      "],[7,"a"],[11,"href",""],[11,"class","back"],[11,"tabindex","6"],[9],[0,"\\n        "],[1,[29,"d-icon",["chevron-left"],null],false],[0,"\\n      "],[3,"action",[[24,0,[]],"back"]],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"a"],[11,"href",""],[11,"class","cancel"],[11,"tabindex","6"],[9],[0,"\\n        "],[1,[29,"d-icon",["times"],null],false],[0,"\\n      "],[3,"action",[[24,0,[]],"cancel"]],[10],[0,"\\n      "],[7,"a"],[11,"href",""],[11,"class","toggler"],[12,"title",[29,"i18n",[[25,["togglerTitle"]]],null]],[9],[0,"\\n        "],[1,[29,"d-icon",[[25,["togglerIcon"]]],null],false],[0,"\\n      "],[3,"action",[[24,0,[]],"toggle"],[["bubbles"],[false]]],[10],[0,"\\n      "],[7,"a"],[11,"href",""],[11,"class","topic-link"],[12,"title",[29,"i18n",["composer.open_message_topic"],null]],[9],[0,"\\n        "],[1,[29,"d-icon",["external-link"],null],false],[0,"\\n      "],[3,"action",[[24,0,[]],"openTopic"]],[10],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"],[4,"if",[[25,["composerOpen"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","docked-composer-posts"],[9],[0,"\\n"],[4,"if",[[25,["disableEditor"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","docked-composer-tip"],[9],[0,"\\n        "],[7,"span"],[9],[1,[29,"i18n",["composer.quick_duplicate"],null],false],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[25,["loading"]]],null,{"statements":[[0,"        "],[1,[29,"loading-spinner",null,[["size"],[[25,["spinnerSize"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"        "],[7,"div"],[11,"class","docked-post-stream"],[9],[0,"\\n"],[4,"each",[[25,["postStream","posts"]]],null,{"statements":[[0,"            "],[1,[29,"docked-post",null,[["post"],[[24,1,[]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"        "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]}],[0,"  "],[10],[0,"\\n\\n  "],[1,[29,"docked-editor",null,[["tabindex","value","composer","placeholder","disabled","toggleEmojiPicker","emojiPickerOpen","scrollPoststream"],[[25,["editorTabIndex"]],[25,["reply"]],[24,0,[]],"composer.quick_placeholder",[25,["disableEditor"]],"toggleEmojiPicker",[25,["emojiPickerOpen"]],"scrollPoststream"]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/components/docked-composer"}}),Ember.TEMPLATES["javascripts/components/docked-editor"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","docked-editor-container"],[9],[0,"\\n  "],[7,"div"],[11,"class","button-bar"],[9],[0,"\\n    "],[1,[29,"d-button",null,[["action","class","icon","mouseDown"],["openEmojiPicker","btn qm-emoji","smile-o",[29,"action",[[24,0,[]],"buttonMousedown"],null]]]],false],[0,"\\n    "],[1,[29,"docked-upload",null,[["uploadDone","mouseDown"],[[29,"action",[[24,0,[]],"uploadDone"],null],[29,"action",[[24,0,[]],"buttonMousedown"],null]]]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","docked-editor-textarea-wrapper"],[9],[0,"\\n    "],[1,[29,"docked-expanding-textarea",null,[["tabindex","value","class","placeholder","disabled","scrollPoststream","focusChange"],[null,[25,["value"]],"d-editor-input",[25,["placeholderTranslated"]],[25,["disabled"]],"scrollPoststream","focusChange"]]],false],[0,"\\n    "],[1,[29,"popup-input-tip",null,[["validation"],[[25,["validation"]]]]],false],[0,"\\n  "],[10],[0,"\\n\\n  "],[1,[29,"emoji-picker",null,[["active","automaticPositioning","emojiSelected"],[[25,["emojiPickerOpen"]],false,[29,"action",[[24,0,[]],"emojiSelected"],null]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/docked-editor"}}),Ember.TEMPLATES["javascripts/components/docked-upload"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[25,["uploading"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","docked-uploading"],[9],[0,"\\n    "],[1,[23,"uploadProgress"],false],[0,"%\\n  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[1,[29,"d-icon",["picture-o"],[["class"],["qm-upload-picture"]]],false],[0,"\\n  "],[7,"input"],[12,"disabled",[23,"uploading"]],[11,"multiple",""],[11,"type","file"],[9],[10],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/components/docked-upload"}}),Ember.TEMPLATES["javascripts/components/docked-post"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[25,["isSmallAction"]]],null,{"statements":[[0,"  "],[1,[29,"mount-widget",null,[["widget","args"],["docked-small-action",[25,["post"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[7,"div"],[11,"class","docked-post-user"],[12,"data-user-card",[30,[[25,["post","username"]]]]],[9],[0,"\\n"],[4,"unless",[[25,["post","yours"]]],null,{"statements":[[0,"      "],[7,"div"],[12,"class",[30,[[23,"avatarClasses"]]]],[9],[0,"\\n        "],[1,[29,"avatar",[[25,["post"]]],[["avatarTemplatePath","usernamePath","imageSize"],["avatar_template","username","small"]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n  "],[7,"div"],[12,"class",[30,["docked-post-content ",[23,"contentClass"]]]],[9],[0,"\\n    "],[1,[29,"docked-post-content",null,[["post"],[[25,["post"]]]]],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/components/docked-post"}}),define("discourse/plugins/discourse-quick-messages/discourse/lib/docked-screen-track",["exports","discourse/lib/ajax","discourse-common/lib/get-owner"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dockedScreenTrack=void 0;var i=function(e,i){if(i){var n=i.highest_post_number,o=Math.min(n,i.last_read_post_number);(0,s.getOwner)(e).lookup("topic-tracking-state:main").updateSeen(i.id,n);var r={};if(o===n)r[n]=3e3;else for(var a=o+1;a<=n;a++)r[a]=3e3;(0,t.ajax)("/topics/timings",{data:{timings:r,topic_time:3e3,topic_id:i.id},cache:!1,type:"POST",headers:{"X-SILENCE-LOGGER":"true"}})}};e.dockedScreenTrack=i}),define("discourse/plugins/discourse-quick-messages/discourse/lib/user-messages",["exports","discourse-common/lib/get-owner"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCurrentUserMessageCount=e.getCurrentUserMessages=void 0;var s=function(e){var s=(0,t.getOwner)(e).lookup("store:main"),i=e.currentUser.get("username");return s.findFiltered("topicList",{filter:"topics/private-messages/"+i}).then(function(e){var t=e.topics,n=e.topics.map(function(e){return e.id});return s.findFiltered("topicList",{filter:"topics/private-messages-sent/"+i}).then(function(e){var s=e.topics.filter(function(e){return-1===n.indexOf(e.id)}),i=t.concat(s);return i.sort(function(e,t){return e=new Date(e.last_posted_at),t=new Date(t.last_posted_at),e>t?-1:e<t?1:0}),i=i.filter(function(e){return"user_to_user"===e.subtype})}).catch(function(){return console.log("getting sent messages failed"),[]})}).catch(function(){return console.log("getting inbox failed"),[]})},i=function(e,t){var s=e.container.lookup("store:main"),i=e.currentUser.get("username"),n=e.container.lookup("controller:topic"),o=!!n&&n.get("model");return s.findFiltered("topicList",{filter:"topics/private-messages/"+i}).then(function(e){var s=e.topics.filter(function(e){return"user_to_user"===e.subtype&&e.get("last_read_post_number")<e.get("highest_post_number")&&-1===t.indexOf(e.id)&&(!o||!o.get("id")===e.id)}),i=0;return s.forEach(function(e){i+=e.get("highest_post_number")-e.get("last_read_post_number")}),i})};e.getCurrentUserMessages=s,e.getCurrentUserMessageCount=i}),define("discourse/plugins/discourse-quick-messages/discourse/lib/docked-composer",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(e){var t=[];return e.forEach(function(e){var s=e.user?e.user.username:e.username;t.push(s)}),t},s=function(e){var t="",s=e.length;return e.forEach(function(e,i){t+=e,i<s-1&&(t+=i===s-2?" & ":", ")}),t},i=function(){var e=window.innerHeight-270,t=window.innerHeight>window.innerWidth,s=(t?window.screen.height:window.screen.width)-window.innerHeight>40;return t?(568===window.screen.height&&(e=270),667===window.screen.height&&(e=s?295:325),736===window.screen.height&&(e=s?353:383),812===window.screen.height&&(e=s?340:370),window.innerHeight>920&&(e-=45)):window.innerHeight>665&&(e-=128),Math.max(e,270)};e.getUsernames=t,e.formatUsernames=s,e.calcHeightWithKeyboard=i}),define("discourse/plugins/discourse-quick-messages/discourse/components/docked-post-content",["exports","ember-addons/ember-computed-decorators","discourse/components/mount-widget"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n;e.default=s.default.extend((i=(0,t.observes)("post.cooked"),n={widget:"docked-post",_rerender:function(){this.queueRerender()},buildArgs:function(){return{post:this.get("post")}}},function(e,t,s,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,i){return i(e,t,s)||s},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(n,"_rerender",[i],Object.getOwnPropertyDescriptor(n,"_rerender"),n),n))}),define("discourse/plugins/discourse-quick-messages/discourse/components/docked-editor",["exports","discourse/components/d-editor","discourse/lib/user-search","discourse/lib/raw-templates","ember-addons/ember-computed-decorators","discourse/lib/utilities","../lib/docked-composer"],function(e,t,s,i,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,c;e.default=t.default.extend((a=(0,n.on)("didInsertElement"),c={classNames:["docked-editor"],dockedUpload:!1,setupDocked:function(){var e=this.$(".d-editor-input");this._applyMentionAutocomplete(e)},_applyMentionAutocomplete:function(e){var t=this.get("topic.id");e.autocomplete({template:(0,i.findRawTemplate)("user-selector-autocomplete"),dataSource:function(e){return(0,s.default)({term:e,topicId:t,includeGroups:!0})},key:"@",transformComplete:function(e){return e.username||e.name}})},handleIOSPositioning:function(e){if((0,o.isAppleDevice)()){var t=$(".docked-composer"),s={};if("blur"===e)s.height="100%";else{var i=$("body,html"),n=(0,r.calcHeightWithKeyboard)();s.height=n,i.scrollTop(0)}t.css(s),this.sendAction("scrollPoststream")}},actions:{uploadDone:function(e){var t="!["+e.original_filename+"]("+e.url+")";this._addText(this._getSelected(),t),Ember.run.scheduleOnce("afterRender",function(){return $(".d-editor-input").blur()})},openEmojiPicker:function(){this.sendAction("toggleEmojiPicker")},emojiSelected:function(e){this._super(e),this.sendAction("toggleEmojiPicker"),Ember.run.scheduleOnce("afterRender",function(){return $(".d-editor-input").click()})},focusChange:function(e){var t=this;this.handleIOSPositioning(e),"focus"===e&&this.sendAction("toggleEmojiPicker",!1),Ember.run.scheduleOnce("afterRender",function(){"destroying"!==t._state&&t.set("focusState",e)})},buttonMousedown:function(e){var t=this;this.site.mobileView&&"focus"===this.get("focusState")&&Ember.run.next(function(){var s=$(e.target);s.hasClass("qm-upload-picture")&&t.$(".docked-upload input").click(),s.hasClass("qm-emoji")&&t.sendAction("toggleEmojiPicker")})}}},function(e,t,s,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,i){return i(e,t,s)||s},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(c,"setupDocked",[a],Object.getOwnPropertyDescriptor(c,"setupDocked"),c),c))}),define("discourse/plugins/discourse-quick-messages/discourse/components/docked-upload",["exports","discourse/mixins/upload"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend(t.default,{tagName:"button",classNames:"docked-upload btn btn-small",attributeBindings:["uploading:disabled"],type:"PUT",input:function(){return $(this.element).find("input")},click:function(e){$(e.target).is("input")||this.input().trigger("click")}})}),define("discourse/plugins/discourse-quick-messages/discourse/components/docked-expanding-textarea",["exports","ember-addons/ember-computed-decorators","discourse/components/expanding-text-area"],function(e,t,s){"use strict";function i(e,t,s,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,i){return i(e,t,s)||s},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0});var n,o,r,a;e.default=s.default.extend((n=(0,t.on)("didInsertElement"),o=(0,t.on)("willDestroyElement"),r=(0,t.observes)("value"),a={attributeBindings:["disabled","rows"],rows:1,setupListners:function(){var e=this,t=function(){return e.sendAction("focusChange","focus")},s=function(){return e.sendAction("focusChange","blur")};this.setProperties({focus:t,blur:s}),Ember.run.scheduleOnce("afterRender",function(){e.$().one("click",Ember.run.bind(e,t)),e.$().on("focus",Ember.run.bind(e,t)),e.$().on("blur",Ember.run.bind(e,s)),$(document).on("visibilitychange",Ember.run.bind(e,s))})},destroyListners:function(){this.$().off("focus",Ember.run.bind(this,this.get("focus"))),this.$().off("blur",Ember.run.bind(this,this.get("blur"))),$(document).off("visibilitychange",Ember.run.bind(this,this.get("blur")))},_updateAutosize:function(){var e=this;Ember.run.scheduleOnce("afterRender",function(){var t=document.createEvent("Event");t.initEvent("autosize:update",!0,!1),e.element.dispatchEvent(t)})}},i(a,"setupListners",[n],Object.getOwnPropertyDescriptor(a,"setupListners"),a),i(a,"destroyListners",[o],Object.getOwnPropertyDescriptor(a,"destroyListners"),a),i(a,"_updateAutosize",[r],Object.getOwnPropertyDescriptor(a,"_updateAutosize"),a),a))}),define("discourse/plugins/discourse-quick-messages/discourse/components/docked-post",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";function s(e,t,s,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,i){return i(e,t,s)||s},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0});var i,n,o,r;e.default=Ember.Component.extend((i=(0,t.default)("post.yours"),n=(0,t.default)("onlineService.users.@each","post.user_id"),o=(0,t.default)("post.post_type"),r={tagName:"div",classNames:"docked-post",contentClass:function(e){return e?"yours":""},avatarClasses:function(e,t){var s="docked-avatar",i=this.get("onlineService");return i&&i.isUserOnline(t)&&(s+=" user-online"),s},isSmallAction:function(e){return e===this.site.post_types.small_action}},s(r,"contentClass",[i],Object.getOwnPropertyDescriptor(r,"contentClass"),r),s(r,"avatarClasses",[n],Object.getOwnPropertyDescriptor(r,"avatarClasses"),r),s(r,"isSmallAction",[o],Object.getOwnPropertyDescriptor(r,"isSmallAction"),r),r))}),define("discourse/plugins/discourse-quick-messages/discourse/components/docked-composer",["exports","ember-addons/ember-computed-decorators","discourse/components/site-header","../lib/user-messages","discourse/lib/text","../lib/docked-screen-track","discourse-common/lib/get-owner","discourse/lib/url","../lib/docked-composer","discourse/lib/ajax-error"],function(e,t,s,i,n,o,r,a,c,u){"use strict";function l(e,t,s,i,n){var o={};return Object.keys(i).forEach(function(e){o[e]=i[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=s.slice().reverse().reduce(function(s,i){return i(e,t,s)||s},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function d(e){return e.clientY||e.touches&&e.touches[0]&&e.touches[0].clientY}Object.defineProperty(e,"__esModule",{value:!0});var m,p,g,f,h,b,v,k,w,y,O,P,E,j,x,S,z,M,C={raw:"reply",title:"title",topic_id:"topic.id",archetype:"archetypeId",target_usernames:"targetUsernames"};e.default=Ember.Component.extend((m=(0,t.on)("didInsertElement"),p=(0,t.on)("didInsertElement"),g=(0,t.observes)("index"),f=(0,t.observes)("composeState"),h=(0,t.observes)("composerOpen"),b=(0,t.default)("targetUsernames","missingReplyCharacters"),v=(0,t.default)("reply"),k=(0,t.default)("index","singleWindow"),w=(0,t.observes)("emojiPickerOpen"),y=(0,t.default)("composeState"),O=(0,t.default)("composeState"),P=(0,t.on)("init"),E=(0,t.observes)("topic.postStream.loadedAllPosts"),j=(0,t.default)("topic.details.loaded"),x=(0,t.on)("didInsertElement"),S=(0,t.observes)("otherUsernames"),z=(0,t.observes)("targetUsernames"),M={tagName:"div",classNameBindings:[":docked-composer","composeState","integratedCompose","firstPost:new"],disableSubmit:Ember.computed.or("loading","uploading"),composerOpen:Ember.computed.equal("composeState","open"),postStream:Ember.computed.alias("topic.postStream"),loading:!0,composeState:null,targetUsernames:null,firstPost:!1,archetypeId:"private_message",reply:"",topic:null,emojiPickerOpen:!1,hiddenUsernames:!1,mobileKeyboard:!1,_setupDisplay:function(){var e=this.get("integratedCompose");this.set("composeState","open"),this.site.mobileView||e||this.setupComposerResizeEvents()},setupComposerResizeEvents:function(){var e=this,t=this.$(),i=this.$(".docked-composer-header"),n=Ember.$(document),o=0,r=0,a=function(i){t.trigger("div-resizing"),t.addClass("clear-transitions");var n=d(i),a=o+(r-n),c=Ember.$(window).height();a=Math.min(a,c-(0,s.headerHeight)()),a=Math.max(a,240);var u=a+"px";e.movePanels(u),t.height(u)},c=function(t){t.preventDefault(),Ember.run.throttle(e,a,t,20)}.bind(this),u=function e(){n.off("touchmove mousemove",c),n.off("touchend mouseup",e),t.removeClass("clear-transitions"),t.focus()};i.on("touchstart mousedown",function(e){e.preventDefault(),o=t.height(),r=d(e),n.on("touchmove mousemove",c),n.on("touchend mouseup",u)})},_arrangeComposers:function(){var e=this;this.get("singleWindow")||Ember.run.scheduleOnce("afterRender",function(){var t=e.get("index"),s=e.site.mobileView?0:340*t+100;e.$().css("right",s)})},_resize:function(){var e=this.$()?this.$().height():0;this.movePanels(e+"px")},stopBodyScrollingOnMobile:function(){if(this.site.mobileView){var e=this.get("composerOpen"),t=$("body, html");e?(t.scrollTop(0),t.addClass("noscroll")):t.removeClass("noscroll")}},movePanels:function(e){$("#main-outlet").css("padding-bottom",e)},cantSubmitPost:function(){return this.get("replyLength")<1||this.get("targetUsernames")&&0===(this.get("targetUsernames").trim()+",").indexOf(",")},replyLength:function(){return(this.get("reply")||"").replace(/\s+/gim," ").trim().length},editorTabIndex:function(e,t){return t?null:e+1},spinnerSize:function(){return this.site.mobileView?"large":"small"},setupEmojiPickerCss:function(){var e=this;this.get("emojiPickerOpen")?(this.$().css("z-index",100),Ember.run.next(function(){var t={visibility:"visible"};if(e.site.mobileView){var s=e.$().find(".docked-editor").height();t.left=5,t.right=5,t.bottom=s+5}else{var i=e.$().offset(),n=i.left;t.bottom=20,n>400?t.left=n-400:$(window).width()-(n-300)>400?t.left=n+300:(t.left=n,t.bottom=e.$().height())}$(".emoji-picker").css(t)})):($(".emoji-picker").css("visibility","hidden"),this.$().css("z-index",0))},click:function(){"minimized"===this.get("composeState")&&this.open()},closeAutocomplete:function(){this.$(".d-editor-input").autocomplete({cancel:!0})},keyDown:function(e){var t=13===e.which,s=e.shiftKey;if(27===e.which)return this.toggle(),!1;if(t&&s){var i=this.get("reply");return i+="\n",this.set("reply",i),!1}return t?(this.save(),!1):void 0},open:function(){var e=this,t=this.site.mobileView?$(window).height():400;this.set("composeState","open"),this.$()&&(Ember.run.scheduleOnce("afterRender",function(){e.$(".d-editor-input").one("focus",function(){e.$(".d-editor-input").blur()})}),this.$().animate({height:t},200,function(){e.afterStreamRender()}))},collapse:function(){var e=this.site.mobileView?50:40;this.set("composeState","minimized"),this.$()&&this.$().animate({height:e},200)},close:function(){var e=this;this.set("composeState","closed"),this.$()&&this.$().animate({height:0},200,function(){e.sendAction("removeDocked",e.get("index"))})},cancel:function(){var e=this;return new Ember.RSVP.Promise(function(t){e.get("reply")?bootbox.confirm(I18n.t("post.abandon.confirm"),I18n.t("post.abandon.no_value"),I18n.t("post.abandon.yes_value"),function(s){s&&(e.close(),t())}):(e.close(),t())})},toggle:function(){switch(this.closeAutocomplete(),this.get("composeState")){case"open":this.collapse();break;case"minimized":this.open()}return!1},togglerIcon:function(e){return"minimized"===e?"angle-up":"angle-down"},togglerTitle:function(e){return"minimized"===e?"composer.toggler.maximize":"composer.toggler.minimize"},scrollPoststream:function(){var e=this.$(".docked-composer-posts"),t=this.$(".docked-post-stream"),s=t.height(),i=this;this.$(".docked-post-stream img:not(.avatar)").each(function(){0===$(this).height()&&$(this).on("load",function(){this.complete&&i.scrollPoststream()})}),e.scrollTop(s)},actions:{save:function(){this.save()},cancel:function(){this.cancel()},toggle:function(){this.toggle()},openTopic:function(){var e=this.get("topic.url");this.cancel(),a.default.routeTo(e)},showUsernames:function(){this.toggleProperty("showUsernames")},toggleEmojiPicker:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==e?this.set("emojiPickerOpen",e):this.toggleProperty("emojiPickerOpen")},scrollPoststream:function(){this.scrollPoststream()},back:function(){this.back()}},setTopic:function(){var e=this,t=this.get("id");if("new"===t)return this.setProperties({firstPost:!0,loading:!1}),!1;this.set("topic",this.getTopic(t)),this.subscribeToTopic(),this.get("singleWindow")||this.appEvents.on("composer:opened",function(){return e.collapse()})},getTopic:function(e){return(0,r.getOwner)(this).lookup("store:main").createRecord("topic",{id:e})},subscribeToTopic:function(){var e=this,t=this.get("topic");if(t){var s=t.get("postStream"),i={topic_id:t.id,highest_post_number:t.highest_post_number,last_read_post_number:Math.min(t.highest_post_number,t.last_read_post_number),created_at:t.created_at,category_id:t.category_id,notification_level:t.notification_level};(0,r.getOwner)(this).lookup("topic-tracking-state:main").loadStates([i]),this.messageBus.subscribe("/topic/"+t.id,function(t){"created"===t.type&&(s.triggerNewPostInStream(t.id).then(function(){return e.afterStreamRender()}),e.get("currentUser.id")!==t.user_id&&Discourse.notifyBackgroundCountIncrement())})}},afterStreamRender:function(){var e=this,t=this.get("postStream");if(t){var s=this.get("topic.highest_post_number");t.refresh({nearPost:s
}).then(function(){"destroying"!==e._state&&(e.set("loading",!1),Ember.run.scheduleOnce("afterRender",function(){e.$()&&(e.scrollPoststream(),(0,o.dockedScreenTrack)(e,e.get("topic")))}))})}},otherUsernames:function(e){if(e){var t=(0,c.getUsernames)(this.get("topic.details.allowed_users"));return t.splice(t.indexOf(this.get("currentUser.username")),1),(0,c.formatUsernames)(t)}return""},handleLongUsernames:function(){var e=this;this.get("otherUsernames")&&Ember.run.scheduleOnce("afterRender",this,function(){e.$(".docked-usernames").width()>e.$(".docked-usernames-wrapper").width()&&e.set("hiddenUsernames",!0)})},createOrContinue:function(){var e=this,t=this.get("currentUser.username"),s=(this.get("integratedCompose"),null),n=this.get("targetUsernames").split(",");n.push(t),(0,i.getCurrentUserMessages)(this).then(function(i){if(i.forEach(function(e){var i=(0,c.getUsernames)(e.participants);-1===i.indexOf(t)&&i.push(t),_.isEqual(_.sortBy(i),_.sortBy(n))&&(s=e.id)}),s){var o=e.get("docked");o&&o.indexOf(s)>-1?e.set("disableEditor",!0):(e.setProperties({topic:e.getTopic(s),disableEditor:!1}),e.subscribeToTopic())}else e.setProperties({id:"new",topic:null,title:(0,c.formatUsernames)(n),disableEditor:!1})})},save:function(){if(!this.get("cantSubmitPost")){var e=(0,r.getOwner)(this).lookup("store:main"),t=this.get("postStream"),s=this.get("currentUser"),i=e.createRecord("post",{cooked:(0,n.emojiUnescape)(this.get("reply")),yours:!0}),o={custom_fields:{quick_message:!0}};this.serialize(C,o),this.set("reply","");var a="";t&&(a=t.stagePost(i,s),this.set("firstPost",!1)),"staged"===a&&this.afterStreamRender();var c=this,l=this.get("id");i.save(o).then(function(e){t&&(s.set("reply_count",s.get("reply_count")+1),t.commitPost(i)),l&&"new"!==l||(c.set("firstPost",!1),c.sendAction("updateId",c.get("index"),e.responseJson.post.topic_id),"new"===l&&s.set("topic_count",s.get("topic_count")+1))}).catch(u.popupAjaxError)}},serialize:function(e,t){var s=this;return t=t||{},Object.keys(e).forEach(function(i){var n=s.get(e[i]);void 0!==n&&Ember.set(t,i,n)}),t}},l(M,"_setupDisplay",[m],Object.getOwnPropertyDescriptor(M,"_setupDisplay"),M),l(M,"_arrangeComposers",[p,g],Object.getOwnPropertyDescriptor(M,"_arrangeComposers"),M),l(M,"_resize",[f],Object.getOwnPropertyDescriptor(M,"_resize"),M),l(M,"stopBodyScrollingOnMobile",[h],Object.getOwnPropertyDescriptor(M,"stopBodyScrollingOnMobile"),M),l(M,"cantSubmitPost",[b],Object.getOwnPropertyDescriptor(M,"cantSubmitPost"),M),l(M,"replyLength",[v],Object.getOwnPropertyDescriptor(M,"replyLength"),M),l(M,"editorTabIndex",[k],Object.getOwnPropertyDescriptor(M,"editorTabIndex"),M),l(M,"spinnerSize",[t.default],Object.getOwnPropertyDescriptor(M,"spinnerSize"),M),l(M,"setupEmojiPickerCss",[w],Object.getOwnPropertyDescriptor(M,"setupEmojiPickerCss"),M),l(M,"togglerIcon",[y],Object.getOwnPropertyDescriptor(M,"togglerIcon"),M),l(M,"togglerTitle",[O],Object.getOwnPropertyDescriptor(M,"togglerTitle"),M),l(M,"setTopic",[P],Object.getOwnPropertyDescriptor(M,"setTopic"),M),l(M,"afterStreamRender",[E],Object.getOwnPropertyDescriptor(M,"afterStreamRender"),M),l(M,"otherUsernames",[j],Object.getOwnPropertyDescriptor(M,"otherUsernames"),M),l(M,"handleLongUsernames",[x,S],Object.getOwnPropertyDescriptor(M,"handleLongUsernames"),M),l(M,"createOrContinue",[z],Object.getOwnPropertyDescriptor(M,"createOrContinue"),M),M))}),define("discourse/plugins/discourse-quick-messages/discourse/widgets/message-list",["exports","discourse/widgets/widget","../lib/user-messages","virtual-dom","discourse/widgets/raw-html","discourse/lib/text"],function(e,t,s,i,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.createWidget)("message-list",{tagName:"div.message-list",buildKey:function(){return"message-list"},defaultState:function(){return{messages:null,loading:!1}},messagesChanged:function(){this.refreshMessages(this.state)},refreshMessages:function(e){var t=this;this.loading||(e.loading=!0,(0,s.getCurrentUserMessages)(this).then(function(s){if(s.length){var i=s.slice(0,7);i.forEach(function(t){if(t.last_read_post_number<t.highest_post_number&&(t.set("unread",!0),t.set("newCount",t.highest_post_number-t.last_read_post_number)),t.message_excerpt){var s=new n.default({html:"<div class='message-excerpt'>"+(0,o.emojiUnescape)(t.message_excerpt)+"</div>"});t.set("excerpt",s)}e.messages=i})}else e.messages="empty";e.loading=!1,t.scheduleRerender()}))},html:function(e,t){var s=this;t.messages||this.refreshMessages(t);var n=[];if(t.loading)n.push((0,i.h)("div.spinner-container",(0,i.h)("div.spinner")));else if("empty"!==t.messages){var o=t.messages.map(function(e){return s.attach("message-item",e)});n.push((0,i.h)("ul",[o]))}else n.push((0,i.h)("div.no-messages",I18n.t("user.no_quick_messages")));return n}})}),define("discourse/plugins/discourse-quick-messages/discourse/widgets/message-item",["discourse/widgets/widget","virtual-dom","discourse/widgets/post"],function(e,t,s){"use strict";(0,e.createWidget)("message-item",{tagName:"li.message-item",buildClasses:function(e){var t=[];return e.get("unread")&&t.push("unread"),t},html:function(e){var i=e.participants.map(function(e){return(0,s.avatarImg)("small",{template:e.user.avatar_template,username:e.user.username})}),n=[(0,t.h)("ul",(0,t.h)("li",i)),e.get("excerpt")];return e.get("unread")&&n.push((0,t.h)("div",{className:"new-count"},e.get("newCount")+" "+I18n.t("new_item"))),(0,t.h)("a",(0,t.h)("div.item-contents",n))},click:function(){this.attrs.set("unread",!1);var e=this.attrs.id;this.sendWidgetAction("addToDocked",e)}})}),define("discourse/plugins/discourse-quick-messages/discourse/widgets/docked-small-action",["exports","discourse/widgets/widget","discourse/widgets/raw-html","discourse-common/lib/icon-library","discourse/lib/formatter","discourse/lib/url","virtual-dom"],function(e,t,s,i,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(e,t,s){var i=new Date(t),r=(0,n.autoUpdatingRelativeAge)(i,{format:"tiny",addAgo:!0}),a="";return s&&(a="invited_group"===e||"removed_group"===e?'<a class="mention-group" href="/groups/'+s+'">@'+s+"</a>":'<a class="mention" href="'+(0,o.userPath)(s)+'">@'+s+"</a>"),I18n.t("action_codes."+e,{who:a,when:r}).htmlSafe()},c={"closed.enabled":"lock","closed.disabled":"unlock-alt","autoclosed.enabled":"lock","autoclosed.disabled":"unlock-alt","archived.enabled":"folder","archived.disabled":"folder-open","pinned.enabled":"thumb-tack","pinned.disabled":"thumb-tack unpinned","pinned_globally.enabled":"thumb-tack","pinned_globally.disabled":"thumb-tack unpinned","banner.enabled":"thumb-tack","banner.disabled":"thumb-tack unpinned","visible.enabled":"eye","visible.disabled":"eye-slash",split_topic:"sign-out",invited_user:"plus-circle",invited_group:"plus-circle",user_left:"minus-circle",removed_user:"minus-circle",removed_group:"minus-circle",public_topic:"comment",private_topic:"envelope"};e.default=(0,t.createWidget)("docked-small-action",{tagName:"div.docked-small-action",html:function(e){var t=[];t.push((0,r.h)("div.icon",(0,i.iconNode)(c[e.action_code]||"exclamation"))),t.push((0,r.h)("span",(0,r.h)("a.mention",{href:(0,o.userPath)(e.username)},"@"+e.username)));var n=a(e.action_code,e.created_at,e.action_code_who);return t.push(new s.default({html:"<span>"+n+"</span>"})),e.cooked&&t.push(new s.default({html:"<div class='custom-message'>"+e.cooked+"</div>"})),t}})}),define("discourse/plugins/discourse-quick-messages/discourse/widgets/message-menu",["exports","discourse/widgets/widget","discourse-common/lib/get-owner","virtual-dom","discourse/lib/url"],function(e,t,s,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.createWidget)("messages-menu",{tagName:"div.messages-menu",panelContents:function(){return[this.attach("message-list"),(0,i.h)("div.menu-footer",[(0,i.h)("hr"),(0,i.h)("ul.menu-links",[(0,i.h)("li.all-messages",this.attach("link",{label:"show_more",action:"goToMessages"})),(0,i.h)("li.new-message",this.attach("link",{icon:"envelope",label:"user.new_private_message",action:"addToDocked"}))])])]},html:function(e){var t=this,s=e.notMenu,i=[];return s?i.push(this.panelContents()):i.push(this.attach("menu-panel",{contents:function(){return t.panelContents()}})),i},addToDocked:function(e){(0,s.getOwner)(this).lookup("controller:application").send("addToDocked",e),this.sendWidgetAction("messagesClicked")},goToMessages:function(){n.default.routeTo("/users/"+this.currentUser.get("username")+"/messages"),this.sendWidgetAction("messagesClicked")},clickOutsideMobile:function(e){var t=this,s=$(document.elementFromPoint(e.clientX,e.clientY));if(s.parents(".panel").length&&!s.hasClass("header-cloak"))this.sendWidgetAction("toggleMessages");else{var i=$(window),n=parseInt(i.width(),10),o=$(".menu-panel");o.addClass("animate");var r=this.site.mobileView?"left":"right";o.css(r,-n);var a=$(".header-cloak");a.addClass("animate"),a.css("opacity",0),Ember.run.later(function(){return t.sendWidgetAction("toggleMessages")},200)}},clickOutside:function(e){this.site.mobileView?this.clickOutsideMobile(e):this.sendWidgetAction("toggleMessages")}})}),define("discourse/plugins/discourse-quick-messages/discourse/widgets/docked-post",["exports","discourse/widgets/widget","discourse/widgets/post-cooked","discourse/widgets/decorator-helper","discourse/lib/formatter"],function(e,t,s,i,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),u=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),c(t,[{key:"init",value:function(){var e=$("<div class='cooked'>"+this.attrs.cooked+"</div>");return this._insertQuoteControls(e),this._showLinkCounts(e),this._fixImageSizes(e),this._applySearchHighlight(e),e[0]}},{key:"update",value:function(e){return this.init()}}]),t}(s.default);e.default=(0,t.createWidget)("docked-post",{buildAttributes:function(e){return{title:(0,n.longDate)(e.post.created_at)}},html:function(e){var t=e.post;return new u(t,new i.default(this))}})});
//# sourceMappingURL=/assets/plugins/discourse-quick-messages-00f3d756983f1f963b845fbb6dec571437803aef9c2e12631d18ed707d8ac840.js.map